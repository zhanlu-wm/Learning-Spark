# Chapter_3 RDD编程
## 1. 何为RDD？
    Spark中的RDD是一个不可变的分布式对象集合，每个RDD都被分为多个分区，这些分区分布在集群中不同的节点上。

## 2. 如何创建RDD？
    方式1：读取外部数据集；
    方式2：读取驱动程序中的对象集合，将其进行并行化。

## 3. RDD支持那些类型的操作？
    1. 转化操作（transformation）：该操作会由一个RDD生成一个新的RDD；
    2. 行动操作（action）：该操作会计算出一个结果，并把结果返回到驱动程序中或者存储到外部存储系统（如HDFS）。
## 4. 转化操作和行动操作的区别？
    转化操作并不会马上执行由一个RDD生成另一个新的RDD的计算过程，Spark对于RDD的转换操作是采用的惰性执行策略，只有在后续的第一个行动操作出现时，才会真正执行之前的一系列RDD转换操作，一系列串联的转换操作组成的转换流程构成了实现最终结果计算的操作蓝图，其中的每个转换操作代表了一个将来要执行（而不是当下执行）的转换步骤。

## 5. RDD的缓存/持久化？
    默认情况下，Spark中定义的一个RDD，在每次基于它执行行动操作时，都会重新计算它，或者说重新执行得到这个RDD所需的一系列转换操作，如果想在将来的多个行动操作中重用同一个RDD，可以使用RDD.persist()方法让Spark将该RDD缓存下来。后续在第一次执行了对这个RDD的行动操作之后，Spark会将该RDD的数据以分区的方式存储在集群中的各个节点上，这样，后续基于该RDD进行其他的行动操作时，就可以直接重用这些数据，而不需要再重新计算。持久化并不总是必要的，一般对于较大的数据集才是比较有意义的。

## 6. RDD操作
### 1. 转化操作
    RDD的转化操作是返回新RDD的操作，转化出来的RDD是惰性求值的，只有行动操作中用到这些RDD时才会真正执行计算。
    转化操作可以操作任意数量的输入RDD。
    从已有RDD中派生出新的RDD，Spark会使用谱系图来记录不同RDD之间的依赖关系。
### 2. 行动操作
    行动操作是对数据集执行实际计算的RDD操作，它把最终求得的结果返回到驱动程序，或存储到外部存储系统中。
    它会触发执行那些求值必须用到的RDD的转化操作。
    每当我们调用一个新的行动操作时，整个RDD都会默认从头开始计算，对此我们可以通过将中间结果持久化来避免这种低效行为。
### 3. 惰性求值
    RDD的转化操作都是惰性求值的，在行动操作调用前，Spark不会执行转化操作。
    惰性求值意味着当我们对RDD调用转化操作时，操作不会立即执行。相反，Spark会在内部记录下所要求执行的操作的相关信息。我们不应该把RDD看作存放着特定数据的数据集，而最好把每个RDD当作我们通过转化操作构建出来的、记录如何计算数据的指令列表。把数据读取到RDD的操作也同样是惰性的。

## 7. 向Spark传递函数
    传递函数时，所传递的函数和其引用的数据需要是可序列化的，如果包含了无法序列化的数据，可能导致程序失败。
    传递一个对象的方法或字段时，会包含对整个对象的引用，将该对象也传递到各个节点上，对于对象的字段的传递，可以将其放到局部变量中，避免传递包含该字段的整个对象。

## 8. 常见的转化操作和行动操作
### 1. 受任意数据类型的RDD支持的转化操作和行动操作
    (1) 转化操作 之 作用于RDD中各个元素的转化操作：
        map
        filter
        flatMap
    (2) 转化操作 之 伪集合操作，这些操作要求操作的RDD是相同数据类型的：
        RDD.distinct               ：去重，需要进行数据混洗，操作开销较大
        RDD1.union(RDD2)           ：并集（不去重）
        RDD1.intersection(RDD2)    ：交集（去重），需要进行数据混洗，操作开销较大
        RDD1.subtract(RDD2)        ：保留RDD1中存在但RDD2中不存在的元素集合（不去重），需要进行数据混洗，操作开销较大
        RDD1.cartesian(RDD2)       ：返回笛卡尔积（不去重），求大规模RDD的笛卡尔积开销巨大
        sample                     ：对RDD采样（？？？？？？）
    (3) 行动操作：
        reduce：返回值类型须和RDD的元素类型相同
        fold：返回值类型须和RDD的元素类型相同
        aggregate
        collect
        count
        countByValue
        take
        top
        takeOrdered
        takeSample
        foreach

## 9. 不同RDD类型之间的转换
        有些函数或操作只能用于特定类型的RDD，在需要用到这些特殊操作时，可以将已有的RDD转换为具有这些特殊操作函数的RDD。


